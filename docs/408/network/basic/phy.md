---
title: 计网概述 & 物理层
date: 2021-8-4
tags:
  - Network
---

## 计算机网络概述

> 蠢背，并以计网知识为准 ——> 满分

### 定义和组成

网络定义：

- 计算机网络是一些互相连接的、自治的计算机的集合
- 因特网是网络的网络

网络的组成（物理）：

- 硬件：主机、通信处理机，线路、交换设备（交换器、路由器、中继器等连接设备）
- 软件：实现资源共享的软件（百度网盘）和方便用户使用的软件实体（linux、windows、lol）
- 协议：数据在线路上传输遵循的规则

网络的组成（工作方式）：

- 边缘部分：所有联网的主机（联网的计算机），这些主机也叫端系统，边缘部分也叫资源子网
- 核心部分：网络和连接网络的路由器，为边缘部分提供连接服务和交换服务，也叫通信子网

网络并不在乎其内部传输的数据，就像铁路不关心火车中运的是什么，而只关心二者是否联通

端系统（主机）之间的通信方式：

- C/S 方式，客户/服务器方式，如 MC
- P2P 方式，对等，如种子、百度网盘

核心部分：向主机提供连通性

- 起核心作用的是路由器
- 路由器实现分组交换和路由选择，这是网络核心最关键的功能

### 网络服务

核心部分除了提供连通性，同时还提供一些服务

#### 面向连接服务和无连接服务

- 面向连接服务（打电话），如 TCP、PPP，需经过建立连接、维护连接、释放连接三过程，协议复杂且效率不高，但传输可靠性高
- 无连接服务（发邮件），如 UDP，每个分组都携带完整的目的地址并且独立传送，不需要连接，协议相对简单、传输效率高，但可能出现乱序、重复和丢失的现象（寄出去就不管了），可靠性不好

#### 可靠服务和不可靠服务

- 可靠服务：具有纠错、检错、应答机制，能够保证数据正确、可靠传送到目的地
- 不可能服务：尽量正确、可靠地传输，是一种尽力而为的服务

#### 有应答服务和无应答服务

- 收到数据后是否发送应答，告知传输方相应信息
- TCP、CSMA/CA 为有应答服务，其余均为无应答服务

可靠 => 面向连接且有应答

反之不然，如 PPP 面向连接但不可靠，CSMA/CA 有应答但不可靠，这二者均存在丢弃机制

- 当数据错误后，选择重发，重发次数达到上限（15次）则丢弃

### 特点和功能

特点：

| 连通性                                               | 共享性                       |
| ---------------------------------------------------- | ---------------------------- |
| 交换信息                                             | 指资源共享                   |
| 互联网具有虚拟的特点，无法知道另一台主机是否是一只猫 | 信息共享、软件共享、硬件共享 |

VPN：

- VPS：代理服务器
- 软件或插件 ——> 利用算力

主要/基本功能：

- 数据通信：最基本和最重要的功能（注意最）

  包括连接控制、传输控制、差错控制、流量控制、多路复用等子功能

- 资源共享：数据共享、软件共享以及硬件资源共享

其他功能

- 分布式处理
- 信息综合处理

### 计算机网络分类

#### 按交换技术分类

- 电路交换
- 报文交换
- 分组交换

#### 按传输介质分类

- 有线网络
- 无线网络

#### 按拓扑结构分类

- 星型网络
- 总线型网络
- 环形网络
- 网状型网络

#### 按分布范围分类

- 广域网 WAN
- 局域网 LAN
- 城域网 MAN
- 个人局域网 PAN

#### 按使用者分类

- 公用网
- 专用网

#### 按传输技术分类

- 广播式：1:n（局域网）
- 点对点：1:1（广域网）

### 计算机网络的性能指标

> 在数据链路层和网络层中进行考察

#### 速率

也叫比特率，每秒传输的字节数，单位可以是 b/s，Mb/s，Gb/s

#### 带宽

数字通信（离散通信，以高低电位表示1/0）中，带宽即网络能达到的最高速率（比特率）

模拟通信（连续通信，波形）中，带宽指波段的上下界之差

#### 时延

数据从一端到达另一端的时间称为时延，由以下部分组成

- 发送时延 / 传输时延（如进入高速路前的收费站，车长/车速）：数据帧长度 / 发送速率
- 传播时延，在链路中经过的时间（高速路上的开车时间）：信道长度 / 信号在信道上的传播速度
- 排队时延（高速收费站的排队时间）
- 处理时延（收费站收费的时间）

总时延 = 发送时延 + 传播时延 + （排队时延 + 处理时延）

- 后二者忽略不计

链路带宽减少了数据的发送时延，但不影响传播时延，由信号决定（大多网速快指的是发送时延小）

时延带宽积：传播时延 x 带宽

- 我们将数据看作连续的，那么整个通信信道中最多存在 传播时延 x 带宽 个比特（高乘以底面积），就像一条路充满车，那么这条路的长度可以用车来衡量
- 时延带宽积（比特数）也被视作两个节点之间的距离
- 如 a b 之间传播时延 100s，每秒发送 1bit 数据，那么 a b 之间距离为 100bit

#### 吞吐量

> 对比港口，吞指进，吐指出

单位时间内通过某个网络（信道或接口）的数据量，与带宽相关：带宽 x 时间 为最大吞吐，而吞吐量为实际发生的量

例题：流水线，mt + (n-1)t

- m 是流水线的段数
- n 是数据组数
- t 是每发送一段数据所需时间（发送时延+传播时延）

<img src="../../../.vuepress/public/img/2022-8-29-1.png">

分组是一组一组发送的，即上一组到达后，下一组才发出，这里的总时延要求的是第一组开始发送到最后一组数据到达末端经历的时间

思路一：

每次发送一组数据一端路程时延：t = 发送时延+传播时延 = 100x8b / 100Mb/s + 1km / 10^5km/s = 0.000018 s

那么，从 0.00018s（10t） 后，十组数据全部发送到第二个节点，很明显，此时最后一组数据在第二个节点，再经过四段路到末端，结束发送，于是总时延为 10t + 4t = 14t

思路二：

首先考虑第一组数据，他经过 5 次发送到达末端，即 5t，因为下一组数据总是紧跟在上一组之后，所以之后每经过一个 t 时延，都将有一组数据到达末端，一共还剩 9 组，故总时延为 5t + 9t = 14t

### 计算机网络体系结构

> 包括了全部考题

#### 体系结构及相应概念

分层的设计方案（解藕）：按照信息的流动过程将网络功能分成一个个的功能层，同等功能层采用相同的协议，同一计算机的相邻层通过接口传递信息

- 体系结构定义了各层的功能，但不讨论功能的实现

网络的体系结构：计网的各层和其协议的集合

- 实体：任何能接收/发送信息的硬件或软件进程
- 对等实体：同一层的实体称为对等实体，如副总1和副总2为对等实体（不同节点的相同层）
- 对等层：不同计算机的同一层，如公司a和公司b的管理层为对等层
- 相邻层：同一计算机的相邻层次

底层为高层提供服务，如第 n 层为第 n+1 层提供服务

#### 体系结构的三要素

- 协议：事先约定好的规则，规定数据交换的格式以及有关的同步问题，为数据交换而建立的标准、约定和规则
  - 语法：数据的结构或格式
  - 语义：数据所代表的意义，如绿灯表示通行
  - 同步：事件实现顺序的说明，如绿灯 40s 后红灯 20s
- 服务：下层为紧邻的上层提供功能调用
  - 面向连接和无连接服务（尽力而为的交付）
  - 可靠和不可靠
  - 有应答和无应答
- 接口：相邻两层交换信息的连接点，Service Access Point，SAP，服务访问点

协议是水平的，控制对等实体之间的规则；服务是垂直的，下层对上层

#### OSI 参考模型

> 考题集中分布
>
> Open System Internetwork Reference

OSI 参考模型（从上到下）：应表会传网数物

- 上三层为通信子网，为了联网附加的通信设备，完成数据传输功能
- 下三层为资源子网，相当于计算机系统，完成数据处理
- 传输层呈上启下

每层功能、每层数据格式以及每层协议（重点）

| 层级                     | 数据格式                              | 功能                                                         | 协议                               |
| ------------------------ | ------------------------------------- | ------------------------------------------------------------ | ---------------------------------- |
| 应用层                   | 数据                                  | 为用户的各种应用程序提供各类网络服务                         | HTTP、FTP、TELNET、SMTP、DNS、DHCP |
| 表示层（representation） | /                                     | 将不同的数据格式转化为一种，解决数据格式问题以及加密、解密、压缩、解压缩问题 | ASCH、JPEG、MPEG、WAV              |
| 会话层（session）        | /                                     | 建立、管理会话，保证两个点之间的连接，为表示层提供服务       | 安排访问次序，同步点的设计         |
| 传输层                   | TCP 数据端 / UDP 数据报（用户数据报） | 提供端到端的连接、进程到进程的连接，保证数据的正确的顺序和完整性 | TCP、UDP                           |
| 网络层                   | 数据包（数据报 / 分组）               | 主机之间的连接、路径选择以及基于IP的寻址，为分组提供路由功能 | IP、ICMP、ARP、IGMP                |
| 数据链路层               | 帧                                    | 提供数据在物理链路的传输、物理寻址、网络拓扑、错误检测，提供SAP | 两层交换器、网桥                   |
| 物理层                   | 比特流                                | 高低电平、数据传输速度、传输距离、物理连接器                 | HUB（集线器）、中继器以及传输线路  |

#### TCP/IP 模型

> 工业应用，减少层数提高效率

应表会传网数物 ——> 应传网网

| 层级                                 | 功能                       |
| ------------------------------------ | -------------------------- |
| 应用层（用户对用户）                 | 对应应用层、表示层、会话层 |
| 传输层（进程对进程，端到端）         | TCP、UDP                   |
| 网络层（网际层、IP层）（主机对主机） | IP、IGMP、ARP、ICMP        |
| 网络接口层                           | 数据链路层和物理层         |

#### OSI/RM 对比 TCP/IP

|          | TCP/IP                 | OSI                                |
| -------- | ---------------------- | ---------------------------------- |
| 流量控制 | 应用层、传输层         | 数据链路层、网络层、传输层、上三层 |
| 网络层   | 尽力而为的传输         | 可靠和不可靠均有                   |
| 传输层   | 可靠的TCP，不可靠的UDP | 只有可靠传输                       |

#### 教学模型

五层模型

- 应用层、运输层、网络层取自 TCP/IP 模型
- 数据链路层、物理层取自 RM 模型

数据从上到下封装，不改变数据内容，加上头尾用于识别

从下往上叫做解封装

- 物理层和应用层不参与封装

## 物理层

> 往往只考一个选择题
>
> 物理层通过一套定义、规范，从离散信号、连续信号中解析数据(0/1)

物理层的功能：屏蔽不同传输媒体和通信手段的差异，透明地传输比特流

物理层特性

- 机械特性：外观特征
- 电气特性：每条线路上的电压范围
- 功能特性：线是干啥的
- 过程特性（时间特性）：可能事件的出现顺序

通信模型：PC - 调制解调器(字-模拟信号) - 公网 - 调制解调器(模拟信号-字) - PC

### 传输媒体

传输媒体，也叫传输介质或传输媒介

- 导引型传输媒体（有线）：信号沿着固体传播
  - 双绞线：电信号，最慢，最常见，两根绞在一起的目的是为了减少串扰
    - 屏蔽双绞线
    - 无屏蔽双绞线
    - 不同绞合度的双绞线
  - 同轴电缆：电信号，带宽取决于电缆的质量
  - 光纤：光传输（全反射），最快
    - 多摸光纤
    - 单模光纤：类似于直线传播
- 非导引型传输媒体（无线）：指自由空间，利用短波通信
  - 微波，在空间中直线传播，所以需要塔台中转
    - 地面微波接力通信
    - 卫星通信
  - 宽带接入技术

100 BaseT，100基带的双绞线

100 BaseF ，100基带的光纤

频谱

介质通信模式

- 单向通信（单工通信）：江河
- 双向交替通信（半双工通信）：水管
- 双向同时通信（全双工通信）：同时发送和接受

### 调制

> 重点！
>
> 在信号（载体）中识别数据

调制方式

- 基带调制：其他信号 ——> 数字信号（离散信号），编码
- 带通调制：其他信号 ——> 模拟信号（连续信号），调制

#### 编码

常见的编码方式：目的是区分0/1

- 归零（RZ）和不归零制（NRZ），差分不归零制（NRZI）
  - 高电位1,低电位为0
  - 不归零制从高电位垂直下降到低点位
  - 归零制在转换时会在0电位停留一段时间
  - 差分不归零会比较相邻二者的信号，一样则为0,不同则为1
- 曼彻斯特
  - 每个时钟信号都是一高一低组成
  - 在同一时钟信号中，从低到高表示0，从高到低表示1
- 差分曼彻斯特
  - 差分指相邻两个的关系，看前一段的后半部分，后一段的前半部分，如果不同即为0，一样则为1

常考题型：给一段数去对图，给一个图去对数

区别

- 曼彻斯特编码的信号变化频率高于归零编码
- 不归零制无法区分时钟信号的边界，没有自同步能力；而曼彻斯特每个时钟信号都是一高一低，能够自区分

#### 调制

其他信号 ——> 模拟信号，目的仍是区分0/1

基本的二元制调制方法

- 调幅（AM）：调制载波振幅，0的时候幅度小，1的时候幅度大
- 调频（FM）：调制载波频率，0的时候频率低，1的时候频率高
- 调相（PM）：调制载波初始相位，0和1的初始相位不同

正交振幅调制（QAM）：分四个象限，接受不同范围内的点（载体），不同象限对应不同的二进制编码，如第一象限表示 0000-0100

每个信号所携带的比特数为 log(M*N)，M是相位，N是振幅

### 信道的极限容量

> 重点，和调制64开

码元和比特率

码元：信号的不同形状

波特率：码元 / s

比特率：bit / s

- 若一个码元 n bit，则比特率为 n x 波特率
- 码元的比特量 n = logV，V 为码元数。对 V 种码元进行二进制编码。若 V = 2，则编码为0,1，一个码元的比特量为1；若 V = 4，则编码为 00,01,10,11，码元的比特量为2，以此类推

数据的传输过程中

- 存在失真和各种干扰
- 波特率越高，距离越远，干扰的影响越大，波形（码元）的失真就越严重

奈奎斯特定理（奈氏准则）：码元的传输速率上限值 B = 2W，W 为带宽大小

若有 V 种码元（每个码元数据量为 logV bit），则极限数据传输速率 C = 2W log V bit/s

采样定理：采样频率（在单位波段中采样个数）>= 两倍原始频率，就可以把所有频率采出来

信噪比：真实环境中的干扰，信号的平均功率和噪声的平均功率之比
$$
信噪比(dB) = 10log_{10}(S/N)
$$
当 S/N = 10 时，信噪比为 10 dB，当 S/N 为 1000 时，信噪比为 30 dB

香农定理：在有噪声的环境中，极限数据传输率 C = W log (1+S/N)

- 证明只要带宽一定，平均功率和噪声平均功率一定，速率就固定了

注意：以上提供了两种计算最大数据率的公式（奈氏准则和香农定理），在考试中应以更小的一个作为答案

| 五个公式              | 描述                                                         |
| --------------------- | ------------------------------------------------------------ |
| C = B x N = B x log V | C 数据传输比特率，N 为每个码元的数据量，B 为波特率(Baud)，V 为码元种数 |
| B = 2W                | B 码元传输率的上限，W 为带宽                                 |
| C = 2Wlog V           | C 数据传输比特率的上限，V 为码元种数                         |
| dB = 10 log10 (S/N)   | 信噪比 dB，S 为信号平均功率，N 为噪声平均功率                |
| C = W log(1+S/N)      | C 数据传输比特率上限                                         |

例题知识点：

- 影响信道最大传输速率的因素：B+V 或 W+dB
- 波形数量 = 相位数 x 振幅数

### 物理层设备

#### 中继器

碰撞域，也叫冲突域，不同站点发送的帧在传输线路上有所碰撞的网络区域

为什么要有中继器？

- 避免长距离传输造成的失真

中继器的作用：将衰减得不完整的信号经过整理重新产生出完整的信号再继续传送，实现一个得以扩展的网络

- 工作区域：物理层
- 本质作用：信号再生；简单地转发比特

中继器的转发面向所有连接中继器的站点，这种转发模式叫做广播，在拓扑上属于星型网络；又因为数据在所有连接中继器的机器上共享（没有中心之分），所以中继器组成的局域网在逻辑上其实是一种总线型网络

在总线型网络中为了避免冲突，各站点必须控制传输媒体，时刻至多允许一个站点发送数据；自然的，根据定义，处于中继器网络中的不同站点属于同一个碰撞域

- 中继器以太网是一个独立的碰撞域，同时只能允许一个站点发送数据（也属于同一个广播域）
- 中继器工作在物理层，他的接口仅仅简单的发送比特，不能连接不同速率、规格的网段
- 中继器仅作用于信号的电气部分
- 中继器以太网站点共享带宽，不能同时发送数据，即 1s 内，所有站点共发带宽等值的比特，于是各站点平均带宽为：带宽 / 站点数

发大器和中继器的区别：

- 发大器放大的模拟信号，同时增大了噪声
- 中继器作用的是数字信号，并且是再生，重点在还原，不同于放大

#### 集线器

中继器是集线器的前身，实际上就是一种多端口的中继器，扩大了碰撞域

