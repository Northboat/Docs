---
title: 概述和词法语法分析
date: 2021-9-12
tags:
  - Compilation
---

## 编译原理概述

>哈工大网课

### 什么是编译

高级语言：贴近自然语言，分为解释型(python)和编译型(java)

汇编语言：助记符，mov ax, 2

机器语言：0/1 码，C706 0000 0002

高级语言通过编译器直接转化为机器码或先转化为汇编语言再汇编为机器码

$$
源程序\stackrel{预处理器}{\longrightarrow}预处理过的源程序\stackrel{编译器}{\longrightarrow}汇编语言程序\stackrel{汇编器}{\longrightarrow}\\可重定位的机器码\stackrel{链接器/加载器}{\longrightarrow}目标机器代码
$$

### 汇编系统的结构

输入：高级语言程序

输出：汇编/机器语言程序

$$
源语言句子\stackrel{语义分析}{\longrightarrow}句子语义(中间表示:语法树)\longrightarrow目标语言句子
$$

在语义分析这一过程分为

- 词法分析
- 语法分析
- 语义分析

汇编系统分为前后端

前端：词法、语法、语义分析器，中间代码生成器

- 语法制导翻译：语法分析、语义分析、中间代码生成相结合

后端：目标代码生成器，机器相关代码优化器

### 词法分析概述

从左向右扫描字符，识别每个单词及类型，并使用语法单元(token)表示

单词类型

- 关键字：if/elif
- 标识符：变量名、数组名、记录名
- 常量
- 运算符：算数、关系、逻辑
- 界限符：java的 ;

token 为一个键值对，键为单词类型，值为单词值，常量为具体值，标识符为变量名

### 语法分析概述

从词法分析输出的 token 序列中识别各类短语，构造语法分析树

分析树 ——> 文法

如定义语句左侧的文法

~~~java
D -> T IDS
T -> int | double | char | boolean
IDS -> id | IDS id
~~~

### 语义分析概述

高级语言语句分为声明语句和可执行语句

主要任务：

- 对于声明语句：收集标识符的属性信息并储存在**符号表**中，标识符的存放利用**字符串表**实现
  - 种属：简单变量、复合变量、过程
  - 类型：int、double
  - 存储位置、长度
  - 值
  - 作用域
  - 参数和返回值信息
- 语义检查
  - 变量或过程未经声明就使用
  - 变量或过程重复声明
  - 运算分量类型不匹配
  - 操作符、数类型不匹配

### 中间代码生成和编译器后端概述

中间表示形式：

- 三地址码
  - 由类似汇编的指令序列组成
  - 最多三个操作符
- 语法结构树/语法树

常用三地址码指令

赋值：x = y op z / x = op y。这里的 xyz 都是地址，可以是源程序里的名字（在符号表中查找）、常量、编译器的临时变量

复制：x = y

跳转：if x relop y goto n / goto n，条件跳转和无条件跳转

三地址指令的表示

- 四元式
- 三元式
- 间接三元式

目标代码生成的重要任务：为程序中的变量分配寄存器

代码优化：分为机器无关/相关优化，使得运行更快一些，内存占用更少一些

## 前后文无关文法和语言

### 集合

- 集合相加
- 集合相乘：全相乘
- 正闭包：集合幂的集合
- 自反传递闭包：包含空集的正闭包

### 文法

四元式：非终结，终结，产生式，开始符号

- 递归产生自身 C ——> B | 0 | CC | ε

语法树

- 自顶向下
  - 最左推导（规范推导）
  - 最右推导
- 自底向上
  - 最有规约（规范规约）
  - 最左规约

二义性

- 二义性文法：文法所产生的某个句子只有一种推导方式
- 无二义性文法：文法产生的每一个句子都只有一颗语法树

短语：每颗子树的叶子

直接短语：每颗直接子树的叶子

句柄：某句型的最左直接短语

素短语：至少包含一个终结符且不包含更小素短语的短语

